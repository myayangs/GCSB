# 🛠️ Voting App Deployment with Skaffold

This guide covers running the Voting App using Skaffold and watching for the external IP until it's ready.

---

## 📥 Clone the Repository

Open IDE Link -> New Tab
🔃 Open Source Control -> Clone Repository

```
https://github.com/subfuzion/voting-demo.git
```

## 🖥️ Terminal 1 — Deploy the App

```
export PROJECT_ID=$(gcloud config get-value project)
export REGION=$(gcloud compute project-info describe \
    --format="value(commonInstanceMetadata.items[google-compute-default-region])")

gcloud container clusters get-credentials dev-cluster --project $PROJECT_ID --region $REGION

cd ./v2

skaffold run --default-repo=gcr.io/"$PROJECT_ID"/voting-app

while true; do
    IP=$(kubectl get svc web-external -o json | jq -r .status.loadBalancer.ingress[0].ip)
    if [[ "$IP" != "null" && -n "$IP" ]]; then
        echo "Voting App URL:"
        echo "🔗 http://$IP"
        echo "🔗 http://$IP/results"
        break
    else
        echo "Waiting for external IP..."
        sleep 3
    fi
done
```

## 🧹 Terminal 2 — Clean Up Deployment

```
# Navigate to app directory
cd ./v2

# Delete resources deployed by Skaffold
skaffold delete

```
